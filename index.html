<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>硕麦ERP</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
      background: #f5f7fa;
      color: #222;
    }
    .erp-layout {
      display: flex;
      min-height: 100vh;
    }
    .erp-sider {
      width: 200px;
      
      background: #23272e;
      color: #fff;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      box-shadow: 2px 0 8px #0001;
    }
    .erp-sider-logo {
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: 2px;
      background: #181b20;
      color: #fff;
      border-bottom: 1px solid #222;
    }
    .erp-menu {
      flex: 1;
      padding: 16px 0;
    }
    .erp-menu-item {
      padding: 0 32px;
      height: 44px;
      line-height: 44px;
      font-size: 16px;
      color: #bfc5d0;
      cursor: pointer;
      border-left: 4px solid transparent;
      transition: background 0.2s, color 0.2s, border-left 0.2s;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
      border-radius: 6px 0 0 6px;
    }
    .erp-menu-item.active {
      background: #232e3c;
      color: #409EFF;
      border-left: 4px solid #409EFF;
      font-weight: 700;
    }
    .erp-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-width: 0;
      background: #f5f7fa;
    }
    .erp-header {
      background: #fff;
      box-shadow: 0 2px 8px #0001;
      padding: 0 32px;
      height: 56px;
      display: flex;
      align-items: center;
      font-size: 22px;
      font-weight: 700;
      color: #409EFF;
      letter-spacing: 1px;
      border-radius: 0 0 12px 12px;
    }
    .erp-tabs {
      background: #fff;
      display: flex;
      align-items: center;
      gap: 2px;
      padding: 0 32px;
      border-bottom: 1px solid #f0f0f0;
      margin-bottom: 8px;
      border-radius: 0 0 12px 12px;
    }
    .erp-tab {
      padding: 0 28px;
      height: 44px;
      line-height: 44px;
      font-size: 15px;
      color: #666;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      cursor: pointer;
      transition: color 0.2s, border-bottom 0.2s, background 0.2s;
      font-weight: 600;
      border-radius: 8px 8px 0 0;
    }
    .erp-tab.active {
      color: #409EFF;
      border-bottom: 2.5px solid #409EFF;
      background: #f7faff;
    }
    .erp-content {
      padding: 0 32px 32px 32px;
    }
    /* 筛选区美化 */
    .erp-filter-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px 12px;
      margin-bottom: 16px;
      align-items: center;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px #0001;
      padding: 16px 20px 10px 20px;
    }
    .erp-filter-bar select,
    .erp-filter-bar input {
      padding: 6px 12px;
      border-radius: 6px;
      border: 1px solid #dcdfe6;
      font-size: 14px;
      background: #fafbfc;
      transition: border 0.2s;
      outline: none;
    }
    .erp-filter-bar select:focus,
    .erp-filter-bar input:focus {
      border: 1.5px solid #409EFF;
      background: #fff;
    }
    .erp-filter-bar button {
      padding: 0 18px;
      height: 34px;
      border-radius: 6px;
      border: none;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 4px #409eff22;
    }
    .erp-filter-bar button {
      background: #409EFF;
      color: #fff;
      border: none;
    }
    .erp-filter-bar button.secondary {
      background: #fff;
      color: #409EFF;
      border: 1px solid #409EFF;
      margin-left: 8px;
    }
    .erp-filter-bar button:active {
      background: #3076d6;
    }
    /* 表格美化 */
    .erp-table-wrap {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px #0001;
      overflow-x: auto;
      margin-top: 12px;
    }
    table {
      width: 100%;
      min-width: 1200px;
      border-collapse: separate;
      border-spacing: 0;
      background: #fff;
      font-size: 14px;
      border-radius: 12px;
      overflow: hidden;
    }
    th, td {
      padding: 10px 8px;
      border-bottom: 1px solid #f0f0f0;
      text-align: left;
      white-space: nowrap;
    }
    th {
      background: #f8fafd;
      font-weight: 600;
      color: #333;
      font-size: 14px;
      border-bottom: 2px solid #e6e8eb;
    }
    tr:hover td {
      background: #f7faff;
      transition: background 0.2s;
    }
    .erp-table-img {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      object-fit: cover;
      margin-right: 6px;
      vertical-align: middle;
      box-shadow: 0 1px 4px #0001;
    }
    .erp-table-link {
      color: #409EFF;
      text-decoration: underline;
      font-size: 13px;
      margin-left: 2px;
    }
    .erp-table-footer {
      background: #f8fafd;
      font-weight: 600;
      color: #333;
      font-size: 14px;
    }
    .erp-table-pagination {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: flex-end;
      padding: 18px 0 0 0;
      font-size: 14px;
    }
    .erp-table-pagination select, .erp-table-pagination input {
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid #dcdfe6;
      font-size: 14px;
    }
    .erp-table-pagination button {
      min-width: 32px;
      height: 32px;
      border-radius: 6px;
      border: none;
      background: #f5f7fa;
      color: #333;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .erp-table-pagination button.active, .erp-table-pagination button:disabled {
      background: #409EFF;
      color: #fff;
      cursor: default;
    }
    /* 响应式 */
    @media (max-width: 900px) {
      .erp-header, .erp-tabs, .erp-content { padding-left: 4px; padding-right: 4px; }
      table { min-width: 900px; }
      .erp-sider { width: 56px; }
      .erp-menu-item { font-size: 12px; padding: 0 8px; }
      .erp-filter-bar { padding: 8px 4px 4px 4px; }
    }
    .btn-group {
      display: inline-flex;
      vertical-align: middle;
    }
    .btn-group button {
      margin-right: -1px;
      border-radius: 0;
      position: relative;
      z-index: 1;
    }
    .btn-group button:first-child {
      border-radius: 6px 0 0 6px;
      z-index: 2;
    }
    .btn-group button:last-child {
      border-radius: 0 6px 6px 0;
      margin-right: 0;
      z-index: 2;
    }
    .btn-group button:not(:first-child) {
      border-left: 1px solid #e0e3e8;
    }
    .field-tip {
      display: inline-block;
      margin-left: 3px;
      color: #bbb;
      background: #f5f5f5;
      border-radius: 50%;
      width: 16px;
      height: 16px;
      text-align: center;
      font-size: 12px;
      line-height: 16px;
      cursor: pointer;
      border: 1px solid #e0e0e0;
      font-style: normal;
    }
    .field-tip:hover {
      color: #409EFF;
      background: #eaf4ff;
      border-color: #b3d8ff;
    }
    /* 在erp-filter-bar最后加导出和刷新按钮 */
    .erp-filter-bar .filter-actions {
      margin-left: auto;
      display: flex;
      gap: 8px;
    }
    .erp-filter-bar .filter-action-btn {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      border: none;
      background: #f5f7fa;
      color: #409EFF;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, color 0.2s;
      box-shadow: 0 1px 4px #409eff22;
    }
    .erp-filter-bar .filter-action-btn:hover {
      background: #eaf4ff;
      color: #3076d6;
    }
  </style>
</head>
<body>
  <div class="erp-layout">
    <div class="erp-sider">
      <div class="erp-sider-logo">硕麦ERP</div>
      <div class="erp-menu">
        <div class="erp-menu-item active">销售-VC销量监控</div>
      </div>
    </div>
    <div class="erp-main">
      <div class="erp-header">VC销量监控</div>
      <div class="erp-tabs">
        <button class="erp-tab active" id="tab-day" onclick="switchTab('day')">VC销量统计（按天）</button>
        <button class="erp-tab" id="tab-summary" onclick="switchTab('summary')">VC销售统计（汇总）</button>
        <button class="erp-tab" id="tab-realtime" onclick="switchTab('realtime')">VC实时销售统计</button>
      </div>
      <div class="erp-content">
        <div id="content-day">
          <!-- 新筛选区和表格，参照图片布局 -->
          <div class="erp-filter-bar">
            <div class="btn-group" style="margin-right:8px;">
              <button id="btn-day-parent-asin" class="secondary" onclick="setDayAsinType('parent')">父ASIN</button>
              <button id="btn-day-asin" onclick="setDayAsinType('asin')">ASIN</button>
              <button id="btn-day-sku" class="secondary" onclick="setDayAsinType('sku')">硕麦SKU</button>
            </div>
            <div class="btn-group" style="margin-right:8px;">
              <button id="btn-day-qty" onclick="setDayMetric('qty')">销量</button>
              <button id="btn-day-amt" class="secondary" onclick="setDayMetric('amt')">销售额</button>
            </div>
            <select><option>全部店铺</option></select>
            <select><option>全部国家</option></select>
            <select><option>请选择分组</option></select>
            <select><option>请选择销售</option></select>
            <select><option>USD</option></select>
            <input placeholder="2025-07-01  -  2025-07-10">
            <select><option>按日</option></select>
            <select><option>ASIN</option></select>
            <input placeholder="请输入ASIN，多个ASIN换行再写">
            <select><option>Manufacturin</option></select>
            <div class="filter-actions">
              <button class="filter-action-btn" title="导出">⭳</button>
              <button class="filter-action-btn" title="刷新">⟳</button>
            </div>
          </div>
          <div class="erp-table-wrap" id="day-table-wrap"></div>
          <script>
            // 字段定义
            const dayFields = [
              { key: 'asinCombo', label: 'ASIN组合', style: 'min-width:160px;' },
              { key: 'shop', label: '店铺-站点/MSKU', style: 'min-width:120px;' },
              { key: 'product', label: '产品名称/硕麦SKU', style: 'min-width:140px;' },
              { key: 'team', label: '团队/销售负责人', style: 'min-width:110px;' },
              { key: 'stock', label: '库存报告数据' },
              { key: 'subtotal', label: '小计' },
              { key: 'd1', label: '2025-07-10' },
              { key: 'd2', label: '2025-07-09' },
              { key: 'd3', label: '2025-07-08' },
              { key: 'd4', label: '2025-07-07' },
              { key: 'd5', label: '2025-07-06' },
              { key: 'd6', label: '2025-07-05' },
              { key: 'd7', label: '2025-07-04' }
            ];
            // 示例数据
            const dayAsinRows = [
              {
                asinCombo: `<div style='display:flex;align-items:flex-start;gap:4px;'><img src='https://via.placeholder.com/32' style='width:32px;height:32px;border-radius:4px;object-fit:cover;'><div>OVERMONT Camping Kochgeschirr Set<br><a href='#' style='color:#409EFF;text-decoration:underline;font-size:13px;'>B07D6JCHKS</a><span style='color:#888;font-size:13px;'>Overmont VC_DE</span></div></div>`,
                shop: 'Overmont VC_DE<br>MSKU：sku_B07D6JCHKS',
                product: 'OVERMONT Camping Kochgeschirr Set<br>硕麦SKU：O505779',
                team: '团队：德国组<br>销售负责人：张三',
                stock: '采购数量：494<br>接收数量：--<br>库存数量：404<br>VC理论在库：90',
                subtotal: 838,
                d1: 45, d2: 218, d3: 171, d4: 60, d5: 72, d6: 48, d7: 43
              },
              {
                asinCombo: `<div style='display:flex;align-items:flex-start;gap:4px;'><img src='https://via.placeholder.com/32' style='width:32px;height:32px;border-radius:4px;object-fit:cover;'><div>OVERMONT Camping Cookware Set<br><a href='#' style='color:#409EFF;text-decoration:underline;font-size:13px;'>B07D6JCHKT</a><span style='color:#888;font-size:13px;'>Overmont VC_UK</span></div></div>`,
                shop: 'Overmont VC_UK<br>MSKU：sku_B07D6JCHKT',
                product: 'OVERMONT Camping Cookware Set<br>硕麦SKU：O505780',
                team: '团队：英国组<br>销售负责人：李四',
                stock: '采购数量：494<br>接收数量：--<br>库存数量：404<br>VC理论在库：90',
                subtotal: 267,
                d1: 17, d2: 57, d3: 58, d4: 19, d5: 27, d6: 14, d7: 13
              }
            ];
            const dayParentAsinRows = [
              {
                parentId: 1,
                parent: {
                  asinCombo: '父ASIN：B07D6JCHKS（Overmont Camping Kochgeschirr Set）',
                  shop: '无',
                  product: '无',
                  team: '无',
                  stock: '采购数量：494<br>接收数量：--<br>库存数量：404<br>VC理论在库：90',
                  subtotal: 1105,
                  d1: 62, d2: 275, d3: 229, d4: 79, d5: 99, d6: 62, d7: 56
                },
                children: [dayAsinRows[0], dayAsinRows[1]]
              }
            ];
            // 状态
            let dayAsinType = 'asin';
            let dayMetric = 'qty';
            // 渲染表格
            function renderDayTable() {
              const wrap = document.getElementById('day-table-wrap');
              let html = '<table><thead><tr>';
              if(dayAsinType === 'parent') html += '<th></th>';
              dayFields.forEach(f => html += `<th${f.style ? ` style="${f.style}"` : ''}>${f.label}</th>`);
              html += '</tr></thead><tbody>';
              if(dayAsinType === 'asin' || dayAsinType === 'sku') {
                dayAsinRows.forEach(row => {
                  html += '<tr>';
                  dayFields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${row[f.key] || ''}</td>`);
                  html += '</tr>';
                });
              } else {
                dayParentAsinRows.forEach(parent => {
                  html += `<tr class='parent-row' data-parent='${parent.parentId}'><td><button class='expand-btn' onclick='toggleChildRows(${parent.parentId})'>＋</button></td>`;
                  dayFields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${parent.parent[f.key] || ''}</td>`);
                  html += '</tr>';
                  parent.children.forEach(child => {
                    html += `<tr class='child-row child-of-${parent.parentId}' style='display:none;'>`;
                    html += '<td></td>';
                    dayFields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${child[f.key] || ''}</td>`);
                    html += '</tr>';
                  });
                });
              }
              // 合计行
              html += '<tfoot><tr class="erp-table-footer">';
              if(dayAsinType === 'parent') html += '<td>合计</td>';
              else html += '<td>合计</td>';
              dayFields.forEach((f, i) => {
                if(i === 4) html += '<td>库存数量：808<br>VC理论在库：180</td>';
                else if(i === 5) html += '<td>1105</td>'; // 小计
                else if(i >= 6) html += `<td>${[62,275,229,79,99,62,56][i-6]}</td>`; // 各天
                else if(i > 0) html += '<td></td>';
              });
              html += '</tr></tfoot>';
              html += '</table>';
              // 分页栏
              html += `<div class="erp-table-pagination" style="justify-content:space-between;">
                <div><span>50条/页</span><span>共2条</span></div>
                <div><button disabled class="active">1</button><span>前往</span><input type="number" min="1" max="1" value="1" style="width:40px;"><span>页</span></div>
              </div>`;
              wrap.innerHTML = html;
              // 修正按钮高亮
              var btnParent = document.getElementById('btn-day-parent-asin');
              var btnAsin = document.getElementById('btn-day-asin');
              var btnSku = document.getElementById('btn-day-sku');
              if(btnParent && btnAsin && btnSku) {
                btnParent.classList.remove('active','secondary');
                btnAsin.classList.remove('active','secondary');
                btnSku.classList.remove('active','secondary');
                if(dayAsinType === 'parent') {
                  btnParent.classList.add('active');
                  btnAsin.classList.add('secondary');
                  btnSku.classList.add('secondary');
                } else if(dayAsinType === 'asin') {
                  btnAsin.classList.add('active');
                  btnParent.classList.add('secondary');
                  btnSku.classList.add('secondary');
                } else {
                  btnSku.classList.add('active');
                  btnParent.classList.add('secondary');
                  btnAsin.classList.add('secondary');
                }
              }
              var btnQty = document.getElementById('btn-day-qty');
              var btnAmt = document.getElementById('btn-day-amt');
              if(btnQty && btnAmt) {
                btnQty.classList.remove('active','secondary');
                btnAmt.classList.remove('active','secondary');
                if(dayMetric === 'qty') {
                  btnQty.classList.add('active');
                  btnAmt.classList.add('secondary');
                } else {
                  btnAmt.classList.add('active');
                  btnQty.classList.add('secondary');
                }
              }
            }
            function setDayAsinType(type) {
              dayAsinType = type;
              renderDayTable();
            }
            function setDayMetric(type) {
              dayMetric = type;
              renderDayTable();
            }
            // 主子表展开收起
            function toggleChildRows(parentId) {
              var btn = document.querySelector('.parent-row[data-parent="' + parentId + '"] .expand-btn');
              var childRows = document.querySelectorAll('.child-of-' + parentId);
              var expanded = btn.textContent === '－';
              childRows.forEach(function(row) {
                row.style.display = expanded ? 'none' : '';
              });
              btn.textContent = expanded ? '＋' : '－';
            }
            // 初始化
            setDayAsinType('asin');
            setDayMetric('qty');
          </script>
        </div>
        <div id="content-summary" style="display:none;">
          <!-- 顶部折线图 -->
          <div style="background:#fff;border-radius:8px;box-shadow:0 2px 8px #0001;padding:16px 24px 8px 24px;margin-bottom:12px;">
            <div id="summary-chart" style="height:220px;width:100%;margin-bottom:8px;"></div>
          </div>
          <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
          <script>
            function renderSummaryChart() {
              var chartDom = document.getElementById('summary-chart');
              var myChart = echarts.init(chartDom);
              var option = {
                tooltip: { trigger: 'axis' },
                legend: { data: ['销售额', '销量', '平均单价'] },
                grid: { left: 60, right: 80, top: 40, bottom: 30, containLabel: true },
                xAxis: {
                  type: 'category',
                  data: ['2025-07-01','2025-07-02','2025-07-03','2025-07-04','2025-07-05','2025-07-06','2025-07-07']
                },
                yAxis: [
                  { type: 'value', name: '销售额', position: 'left', axisLine: { show: true }, axisLabel: { formatter: '{value}' } },
                  { type: 'value', name: '销量', position: 'right', offset: 0, axisLine: { show: true }, axisLabel: { formatter: '{value}' } },
                  { type: 'value', name: '平均单价', position: 'right', offset: 60, axisLine: { show: true }, axisLabel: { formatter: '{value}' } }
                ],
                series: [
                  { name: '销售额', type: 'line', yAxisIndex: 0, data: [12800, 14200, 13500, 15000, 16200, 15800, 14900] },
                  { name: '销量', type: 'line', yAxisIndex: 1, data: [320, 340, 330, 355, 370, 360, 350] },
                  { name: '平均单价', type: 'line', yAxisIndex: 2, data: [40, 41.8, 40.9, 42.3, 43.8, 43.9, 42.6] }
                ]
              };
              myChart.setOption(option);
              // 强化自适应：监听窗口和父容器resize
              function resizeChart() {
                myChart.resize();
              }
              window.addEventListener('resize', resizeChart);
              // 监听外层容器resize（如erp-content）
              var content = document.querySelector('.erp-content');
              if (window.ResizeObserver && content) {
                var ro = new ResizeObserver(resizeChart);
                ro.observe(content);
              }
            }
            renderSummaryChart();
          </script>
          <!-- 筛选区 -->
          <div class="erp-filter-bar">
            <div class="btn-group" style="margin-right:8px;">
              <button id="btn-parent-asin" class="secondary" onclick="setSummaryAsinType('parent')">父ASIN</button>
              <button id="btn-asin" onclick="setSummaryAsinType('asin')">ASIN</button>
            </div>
            <select><option>全部国家</option></select>
            <select><option>全部店铺</option></select>
            <select><option>请选择分组</option></select>
            <select><option>请选择销售</option></select>
            <input placeholder="2025-07-01  -  2025-07-10">
            <input placeholder="搜索ASIN">
            <select id="summary-currency-select"><option>本币</option></select>
            <select id="summary-type-select" onchange="setSummaryType(this.value)">
              <option value="manufacturing" selected>Manufacturing</option>
              <option value="sourcing">Sourcing</option>
            </select>
            <div class="filter-actions">
              <button class="filter-action-btn" title="导出">⭳</button>
              <button class="filter-action-btn" title="刷新">⟳</button>
            </div>
          </div>
          <!-- 汇总表格区域 -->
          <div class="erp-table-wrap" id="summary-table-wrap"></div>
          <script>
            // 字段定义，增加tip属性
            const summaryFields = {
              manufacturing: [
                { key: 'asinCombo', label: 'ASIN组合', style: 'min-width:180px;' },
                { key: 'shop', label: '店铺-站点/MSKU', style: 'min-width:140px;' },
                { key: 'product', label: '产品名称/硕麦SKU', style: 'min-width:160px;' },
                { key: 'team', label: '团队/销售负责人', style: 'min-width:120px;' },
                { key: 'saleCount', label: '销量统计', tip: '亚马逊卖给客户的订单数量' },
                { key: 'saleAmount', label: '销售金额', tip: '亚马逊卖给客户的订单总金额' },
                { key: 'avgDaySale', label: '平均每日销量' },
                { key: 'avgPrice', label: '平均单价' },
                { key: 'outCount', label: '出货数量', tip: '亚马逊仓库出货数量' },
                { key: 'outAmount', label: '出货金额', tip: '亚马逊仓库出货总成本(po供货成本)' },
                { key: 'refundCount', label: '退货数量', tip: '客户退到亚马逊仓库的数量' },
                { key: 'netPPM', label: 'Net PPM%', tip: '亚马逊的利润率，亚马逊计算得出' },
                { key: 'visit', label: '访问量' },
                { key: 'rate', label: '转化率', tip: '销量/访问量' },
                { key: 'refundRate', label: '退货率', tip: '退货数量/销售数量' }
              ],
              sourcing: [
                { key: 'asinCombo', label: 'ASIN组合', style: 'min-width:180px;' },
                { key: 'shop', label: '店铺-站点/MSKU', style: 'min-width:140px;' },
                { key: 'product', label: '产品名称/硕麦SKU', style: 'min-width:160px;' },
                { key: 'team', label: '团队/销售负责人', style: 'min-width:120px;' },
                { key: 'outCount', label: '出货数量', tip: '亚马逊仓库出货数量' },
                { key: 'outAmount', label: '出货金额', tip: '亚马逊仓库出货总成本(po供货成本)' },
                { key: 'refundCount', label: '退货数量', tip: '客户退到亚马逊仓库的数量' },
                { key: 'visit', label: '访问量' },
                { key: 'rate', label: '转化率', tip: '销量/访问量' },
                { key: 'refundRate', label: '退货率', tip: '退货数量/销售数量' }
              ]
            };
            // 示例数据（多条）
            const asinRows = [
              {
                asinCombo: `<div style='display:flex;align-items:flex-start;gap:4px;'><img src='https://via.placeholder.com/32' style='width:32px;height:32px;border-radius:4px;object-fit:cover;'><div>OVERMONT Camping Kochgeschirr Set Outdoor<br><a href='#' style='color:#409EFF;text-decoration:underline;font-size:13px;'>B07D6JCHKS</a><span style='color:#888;font-size:13px;'>Overmont-VC_DE</span></div></div>`,
                shop: 'Overmont-VC_DE<br>MSKU：sku_B07D6JCHKS',
                product: 'OVERMONT Camping Kochgeschirr Set Outdoor<br>硕麦SKU：O505759',
                team: '团队：德国组<br>销售负责人：张三',
                saleCount: 838,
                saleAmount: '€ 19535.65',
                avgDaySale: 83.8,
                avgPrice: '€ 23.31',
                outCount: 426,
                outAmount: '€ 8621.63',
                refundCount: 22,
                netPPM: '44.02 %',
                visit: 7031,
                rate: '11.92 %',
                refundRate: '2.63 %'
              },
              {
                asinCombo: `<div style='display:flex;align-items:flex-start;gap:4px;'><img src='https://via.placeholder.com/32' style='width:32px;height:32px;border-radius:4px;object-fit:cover;'><div>OVERMONT Camping Cookware Set Outdoor<br><a href='#' style='color:#409EFF;text-decoration:underline;font-size:13px;'>B07D6JCHKT</a><span style='color:#888;font-size:13px;'>Overmont-VC_UK</span></div></div>`,
                shop: 'Overmont-VC_UK<br>MSKU：sku_B07D6JCHKT',
                product: 'OVERMONT Camping Cookware Set Outdoor<br>硕麦SKU：O505760',
                team: '团队：英国组<br>销售负责人：李四',
                saleCount: 267,
                saleAmount: '£ 5378.00',
                avgDaySale: 26.7,
                avgPrice: '£ 20.14',
                outCount: 140,
                outAmount: '£ 1847.35',
                refundCount: 8,
                netPPM: '61.62 %',
                visit: 2447,
                rate: '10.91 %',
                refundRate: '3.00 %'
              },
              {
                asinCombo: `<div style='display:flex;align-items:flex-start;gap:4px;'><img src='https://via.placeholder.com/32' style='width:32px;height:32px;border-radius:4px;object-fit:cover;'><div>OVERMONT Kit de Casseroles Camping<br><a href='#' style='color:#409EFF;text-decoration:underline;font-size:13px;'>B07D6JCHKF</a><span style='color:#888;font-size:13px;'>Overmont-VC_FR</span></div></div>`,
                shop: 'Overmont-VC_FR<br>MSKU：sku_B07D6JCHKF',
                product: 'OVERMONT Kit de Casseroles Camping<br>硕麦SKU：O505761',
                team: '团队：法国组<br>销售负责人：王五',
                saleCount: 72,
                saleAmount: '€ 1726.59',
                avgDaySale: 7.2,
                avgPrice: '€ 23.98',
                outCount: 50,
                outAmount: '€ 1008.46',
                refundCount: 1,
                netPPM: '45.07 %',
                visit: 1114,
                rate: '6.46 %',
                refundRate: '1.39 %'
              }
            ];
            const parentAsinRows = [
              {
                parentId: 1,
                parent: {
                  asinCombo: '父ASIN：B07D6JCHKS（Overmont Camping Kochgeschirr Set Outdoor）',
                  shop: '无',
                  product: '无',
                  team: '无',
                  saleCount: 1177,
                  saleAmount: '€ 21262.24',
                  avgDaySale: 39.2,
                  avgPrice: '€ 22.81',
                  outCount: 616,
                  outAmount: '€ 11477.44',
                  refundCount: 31,
                  netPPM: '50.12 %',
                  visit: 10592,
                  rate: '9.76 %',
                  refundRate: '2.34 %'
                },
                children: [asinRows[0], asinRows[1]]
              },
              {
                parentId: 2,
                parent: {
                  asinCombo: '父ASIN：B07D6JCHKF（Overmont Kit de Casseroles Camping）',
                  shop: '无',
                  product: '无',
                  team: '无',
                  saleCount: 72,
                  saleAmount: '€ 1726.59',
                  avgDaySale: 7.2,
                  avgPrice: '€ 23.98',
                  outCount: 50,
                  outAmount: '€ 1008.46',
                  refundCount: 1,
                  netPPM: '45.07 %',
                  visit: 1114,
                  rate: '6.46 %',
                  refundRate: '1.39 %'
                },
                children: [asinRows[2]]
              }
            ];
            // 状态
            let summaryType = 'manufacturing';
            let asinType = 'asin';
            // 渲染表格
            function renderSummaryTable() {
              const wrap = document.getElementById('summary-table-wrap');
              const fields = summaryFields[summaryType];
              let html = '<table><thead><tr>';
              if(asinType === 'parent') html += '<th></th>';
              // 表头渲染，带tip加问号
              fields.forEach(f => html += `<th${f.style ? ` style="${f.style}"` : ''}>${f.label}${f.tip ? `<span class='field-tip' title='${f.tip}'>？</span>` : ''}</th>`);
              html += '</tr></thead><tbody>';
              if(asinType === 'asin') {
                asinRows.forEach(row => {
                  html += '<tr>';
                  fields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${row[f.key] || ''}</td>`);
                  html += '</tr>';
                });
              } else {
                parentAsinRows.forEach(parent => {
                  html += `<tr class='parent-row' data-parent='${parent.parentId}'><td><button class='expand-btn' onclick='toggleChildRows(${parent.parentId})'>＋</button></td>`;
                  fields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${parent.parent[f.key] || ''}</td>`);
                  html += '</tr>';
                  parent.children.forEach(child => {
                    html += `<tr class='child-row child-of-${parent.parentId}' style='display:none;'>`;
                    html += '<td></td>';
                    fields.forEach(f => html += `<td${f.style ? ` style="${f.style}"` : ''}>${child[f.key] || ''}</td>`);
                    html += '</tr>';
                  });
                });
              }
              // 合计行
              html += '<tfoot><tr class="erp-table-footer">';
              if(asinType === 'parent') html += '<td>合计</td>';
              else html += '<td>合计</td>';
              fields.forEach((f, i) => {
                if(f.key === 'saleCount') html += '<td>1249</td>'; // 销量统计
                else if(i > fields.findIndex(ff=>ff.key==='saleCount')) html += '<td>--</td>';
                else if(i > 0) html += '<td></td>';
              });
              html += '</tr></tfoot>';
              html += '</table>';
              // 分页栏
              html += `<div class="erp-table-pagination" style="justify-content:space-between;">
                <div><span>50条/页</span><span>共3条</span></div>
                <div><button disabled class="active">1</button><span>前往</span><input type="number" min="1" max="1" value="1" style="width:40px;"><span>页</span></div>
              </div>`;
              wrap.innerHTML = html;
              // 修正按钮高亮
              var btnParent = document.getElementById('btn-parent-asin');
              var btnAsin = document.getElementById('btn-asin');
              if(btnParent && btnAsin) {
                btnParent.classList.remove('active','secondary');
                btnAsin.classList.remove('active','secondary');
                if(asinType === 'parent') {
                  btnParent.classList.add('active');
                  btnAsin.classList.add('secondary');
                } else {
                  btnAsin.classList.add('active');
                  btnParent.classList.add('secondary');
                }
              }
            }
            // 切换类型
            function setSummaryType(type) {
              summaryType = type;
              renderSummaryTable();
            }
            function setSummaryAsinType(type) {
              asinType = type;
              renderSummaryTable();
            }
            // 展开收起
            function toggleChildRows(parentId) {
              var btn = document.querySelector('.parent-row[data-parent="' + parentId + '"] .expand-btn');
              var childRows = document.querySelectorAll('.child-of-' + parentId);
              var expanded = btn.textContent === '－';
              childRows.forEach(function(row) {
                row.style.display = expanded ? 'none' : '';
              });
              btn.textContent = expanded ? '＋' : '－';
            }
            // 初始化
            setSummaryAsinType('asin');
            setSummaryType('manufacturing');
          </script>
        </div>
        <div id="content-realtime" style="display:none;">
          <!-- 顶部统计卡片 -->
          <div style="display:flex;gap:24px;margin-bottom:12px;">
            <div style="flex:1;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0001;padding:16px 24px;display:flex;flex-direction:column;align-items:center;">
              <div style="font-size:16px;color:#888;">销售数量</div>
              <div style="font-size:28px;font-weight:700;margin-top:4px;">1591</div>
            </div>
            <div style="flex:1;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0001;padding:16px 24px;display:flex;flex-direction:column;align-items:center;">
              <div style="font-size:16px;color:#888;">销售总金额</div>
              <div style="font-size:28px;font-weight:700;margin-top:4px;">40267.57</div>
            </div>
            <div style="flex:1;background:#fff;border-radius:8px;box-shadow:0 2px 8px #0001;padding:16px 24px;display:flex;flex-direction:column;align-items:center;">
              <div style="font-size:16px;color:#888;">访问量</div>
              <div style="font-size:28px;font-weight:700;margin-top:4px;">576</div>
            </div>
          </div>
          <!-- 筛选区 -->
          <div class="erp-filter-bar">
            <select><option>全部店铺</option></select>
            <select><option>全部国家</option></select>
            <select><option>请选择分组</option></select>
            <select><option>请选择销售</option></select>
            <select><option>币种</option></select>
            <div style="display:flex;align-items:center;">
              <select id="realtime-type-select" style="border-radius:6px 0 0 6px;border-right:none;">
                <option value="parent-asin">父ASIN</option>
                <option value="asin">ASIN</option>
                <option value="sku">硕麦SKU</option>
              </select>
              <input id="realtime-type-input" placeholder="请输入查询内容" style="min-width:180px;border-radius:0 6px 6px 0;border-left:0;">
            </div>
            <div class="filter-actions">
              <button class="filter-action-btn" title="导出">⭳</button>
              <button class="filter-action-btn" title="刷新">⟳</button>
            </div>
          </div>
          <!-- 表格 -->
          <div class="erp-table-wrap">
            <table>
              <thead>
                <tr>
                  <th>ASIN信息</th>
                  <th>店铺-站点/MSKU</th>
                  <th>产品名称/硕麦SKU</th>
                  <th>小计</th>
                  <th>6:00</th>
                  <th>5:00</th>
                  <th>4:00</th>
                  <th>3:00</th>
                  <th>2:00</th>
                  <th>1:00</th>
                  <th>0:00</th>
                  <th>23:00</th>
                  <th>22:00</th>
                  <th>21:00</th>
                  <th>20:00</th>
                  <th>19:00</th>
                  <th>18:00</th>
                  <th>17:00</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <div style="display:flex;align-items:flex-start;gap:4px;">
                      <img src="https://via.placeholder.com/32" style="width:32px;height:32px;border-radius:4px;object-fit:cover;">
                      <div>
                        Favoto Bike Cover for 2 Bikes<br>
                        <a href="#" style="color:#409EFF;text-decoration:underline;font-size:13px;">B09WT9TR36G</a>
                      </div>
                    </div>
                  </td>
                  <td>Favoto-VC_UK<br>MSKU：sku_B09WT9TR36G</td>
                  <td>产品名称：Favoto Bike Cover<br>硕麦SKU：FT0376</td>
                  <td>销量：111<br>销售额：830.68<br>访问量：21</td>
                  <td>37<br>245.00<br>5</td>
                  <td>29<br>196.00<br>4</td>
                  <td>10<br>68.00<br>2</td>
                  <td>11<br>75.00<br>3</td>
                  <td>9<br>61.00<br>2</td>
                  <td>4<br>27.00<br>1</td>
                  <td>13<br>89.00<br>2</td>
                  <td>14<br>95.00<br>3</td>
                  <td>2<br>13.00<br>1</td>
                  <td>10<br>68.00<br>2</td>
                  <td>7<br>48.00<br>1</td>
                  <td>6<br>41.00<br>1</td>
                  <td>5<br>34.00<br>1</td>
                  <td>3<br>20.00<br>1</td>
                </tr>
                <!-- 可继续添加更多行，或后续用JS渲染 -->
              </tbody>
              <tfoot>
                <tr class="erp-table-footer">
                  <td>合计</td>
                  <td></td>
                  <td></td>
                  <td>1591</td>
                  <td>43</td>
                  <td>56</td>
                  <td>119</td>
                  <td>121</td>
                  <td>123</td>
                  <td>86</td>
                  <td>106</td>
                  <td>111</td>
                  <td>87</td>
                  <td>97</td>
                  <td>113</td>
                  <td>110</td>
                  <td>88</td>
                  <td>96</td>
                </tr>
              </tfoot>
            </table>
          </div>
          <div class="erp-table-pagination" style="justify-content:space-between;">
            <div>
              <span>50条/页</span>
              <span>共1条</span>
            </div>
            <div>
              <button disabled class="active">1</button>
              <span>前往</span>
              <input type="number" min="1" max="1" value="1" style="width:40px;">
              <span>页</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function switchTab(tab) {
      document.getElementById('tab-day').classList.remove('active');
      document.getElementById('tab-summary').classList.remove('active');
      document.getElementById('tab-realtime').classList.remove('active');
      document.getElementById('content-day').style.display = 'none';
      document.getElementById('content-summary').style.display = 'none';
      document.getElementById('content-realtime').style.display = 'none';
      if(tab === 'day') {
        document.getElementById('tab-day').classList.add('active');
        document.getElementById('content-day').style.display = '';
      } else if(tab === 'summary') {
        document.getElementById('tab-summary').classList.add('active');
        document.getElementById('content-summary').style.display = '';
      } else if(tab === 'realtime') {
        document.getElementById('tab-realtime').classList.add('active');
        document.getElementById('content-realtime').style.display = '';
      }
    }
  </script>
</body>
</html> 